# 1 웹 성능이란 무엇인가

## 1.1 웹

웹은 인터넷에 연결된 컴퓨터를 통해 정보를 공유할 수 있는 인터넷의 대표적 서비스이다.
인터넷을 통해 사용할 수 있는 서비스들은 이메일, 메신저, 텔넷, FTP등 다양하지만 웹이 절대적인 비율을 차지한다.

### 1.1.1 웹의 역사

물리학자들이 연구결과를 빠르게 공유하기 위해 팀 버너스리 등이 개발했다.

웹사이트라는 페이지를 기반으로 문자 뿐만 아니라 다양한 정보를 문서 읽듯 제공하고, 이를 읽을 수 있는 전용 프로그램인 브라우저를 일종의 데이터베이스로 사용해 필요한 정보를 조회하고 전달할 수 있도록 고안하였다.

웹은 하이퍼 텍스트를 바탕으로 관련있는 문서끼리 연결한 문서의 집합체이다.

멀티미디어 기술이 발전하면서 음성과 영상, 최근에는 VR,AR같은 컨테르를 생산, 전달, 소비할 때도 웹을 사용한다.

#### 1.1.2 웹의 대표적인 요소

웹의 대표적인 요소는 크게 세 가지가 있다.

#### URL

웹 자원이 인터넷상의 어느 위치에 존재하고 있는지 알려주는 방법이다.

프로토콜://서브도메인.톱레벨도메인/디렉토리/최종경로의 구조로 이루어져 있다.

```
https://cdn.webfrontend.org/wp-content/uploads/2020/06/book2.png
```

#### 네트워크 프로토콜

웹의 자원 위치에 접근하는 방식이다.

대부분 HTTP를 사용하는데, HTTP는 헤더와 페이로드로 나뉘어져 있따.

HTTP 프로토콜은 웹에서 클라이언트와 서버 사이에 필요한 정보는 헤더로 주고받고, HTML이나 이미지 같은 실제 데이터는 페이로드 부분에 받을 수 있도록 설계되었다.

#### HTML

컨텐츠를 사용자에게 나타내기 위한 마크업 언어이다.

HTML은 다양한 웹 상의 컨텐츠를 브라우저를 통해 나타낼 수 있는 태그(tag)라는 명령어로 여러 기능을 수행한다.

나타낼 데이터를 정의할 뿐만 아니라 페이지 문서의 제목, 단락, 목록과 같은 구조를 표현하는 역할도 한다.

클라이언트 로직을 실행하는 자바스크립트, 웹페이지의 레이아웃과 세부 형태를 정의하는 CSS와 같이 사용할 숭 ㅣㅆ다,

## 1.2 웹 성능이 중요한 이유

웹 성능은 컨텐츠가 신속하게 전달되어 사용자가 원하는 서비스를 전달받을 수 있도록 하는 시스템들의 성능이다.
즉 도메인 주소를 입력하여 웹페이지가 로딩되어 내용을 볼 수 있을 때까지 걸린 시간, 즉 웹 로딩시간을 말한다,

웹 로딩 속도가 느리면 서비스 사용자의 이률이 높아진다.

보통 3초 안에 웹사이트에 접속한 사용자의 관심을 끌어야한다고 하여 3초의 법칙이라고 부른다.

1. 로딩이 빨라야한다.
2. 머릿말이 주목받을 수 있어야 한다.
3. 글이 눈에 띄어야 한다.
4. 사용자 행동이 필요한 부분은 명확히 전달해야 한다.

## 1.3 웹 성능 측정 방법

웹 성능을 측정하기 위해선 웹 성능에 영향을 주는 요소를 파악하고 측정할 수 있는 적절한 도구를 선택해야 한다.

웹 성능에 영향을 주는 요소는 크게 사용자 환경, 공급자 환경, 전달 환경의 세 가지가 있다.

### 1.3.1 크롬 브라우저의 개발자 도구

### 1.3.2 WebPageTest

www.webpagetest.org

### 1.3.3 구글 PageSpeed

https://pagespeed.web.dev/

Mod-pagespeed 모듈을 웹서버에 추가해서 최적화할 수 있다.

## 1.4 웹 성능을 만드는 지표

스티븐 사우더스의 14가지 웹성능 최적화 기법

http://YSlow.org에서 체크할 수 있다.

1. 백엔드

   - Expires 헤더 추가한다.
   - gzip으로 압축한다
   - 페이지 재전송(redirection)을 피한다.
   - ETag를 설정한다
   - 캐시를 지원하는 AJAZ를 만든다.

2. 프론트엔드

   - HTTP 요청을 줄인다.
   - stylesheet는 상단에 넣는다.
   - 스크립트는 하단에 넣는다.
   - CSS 표현식은 피한다.
   - 자바스크립트와 CSS는 외부파일에 넣는다.
   - 자바스크립트는 작게 한다.
   - 중복 스크립트는 제거한다.

3. 네트워크
   - CDN을 사용한다.
   - DNS 조회를 줄인다.

### 1.4.1 사용자환경 - 프론트엔드

HTML,CSS,JS를 사용하여 웹페이지를 구성한다.

빠르고 보기 쉽게 컨텐츠를 전달하는 것이 프론트엔드의 가장 큰 목적이다.

### 1.4.2 공급자환경 - 백엔드

사용자에게 보이는 컨텐츠를 생성하고 저장하여 네트워크를 통해 전달한다.

데이터베이스 또한 백엔드의 요소로 프론트엔드 최적화에도 성능이 좋지 않다면 백엔드 최적화도 점검해야 한다.

구글 애널리틱스의 Speed를 사용하여 백엔드 성능을 체크할 수 있다.

### 1.4.3 전달환경 - 네트워크

네트워크는 장소와 시간에 따라 속도가 변하기 떄문에 성능 측정이 어렵다.

네트워크 성능을 제약하는 두 가지 요소는 대역폭과 지연시간이다.

대역폭은 일정 시간에 처리할 수 있는 트래픽 양이며, 사용자가 갑자기 증가하면 이에 영향을 받아 웹 컨텐츠의 전달 속도를 느리게 만들 수도 있다.

네트워크는 각 국가의 ISP에서 제공하는 서비스를 사용한다.

## 1.5 웹성능과 프론트엔드

대다수의 웹사이트에서 웹 사이트를 로딩할 때 프론트엔드에서 많은 시간을 소요한다.

그 이유는 사용자(브라우저) 관점에서 원하는 콘텐츠를 전달받았는지가 웹 성능의 기준이기 때문이다.

또한 웹 서버가 콘텐츠를 생산하는 시간보다 사용자가 웹서비스와 상호작용하여 원하는 콘텐츠를 가져다 렌더링하는데에 시간이 더 소요되기 때문이다.

### 1.5.1 브라우저 렌더링

lighthouse를 사용하여 혹인할 수 있다.

다음과 같은 지표들을 사용한다.

- FCP : 첫번째 텍스트 또는 이미지가 표시되는데 걸린 시간
- SI : 페이지 컨텐츠가 얼마나 빨리 표시되는지에 대한 정보
- LCP : 가장 큰 텍스트 또는 이미지가 표시된 시간
- TTI : 사용자와 페이지가 상호작용할 수 있게 된 시간
- TBT : FCP와 TTI 사이 모든 시간의 합
- CLS : 표시 영역 안에 보이는 요소들이 얼마나 이동하는지에 대한 정보

## 1.6 웹 성능 예산

웹 성능을 명확한 지표로 만들고 관리하는 것이 좋다.

웹 성능을 계량할 수 있도록 수치화하여 기업의 목표로 삼을 때 많이 사용하는 방법 중 하나가 웹 성능 예산(web performance budget)이다.

성능 예산이란 웹 성능에 영향을 미치는 다양한 요소를 제어하는 한곗값으로 다양한 값이 존재한다.

성능 예산은 크 게 세 가지로 나눌 수 있다.

### 1.6.1 정량 기반 지표

정량 기반 지표는 이미지, 스크립트, 폰트 등 웹페이지 제작에 필요한 요소들에 대한 한곗값이다.

웹 페이지를 설계할 때 고려하는 대표적인 정량 기반 지표는 다음과 같다.

- 이미지 파일 최대 크기
- 최대 웹 폰트 파일 개수
- 자바스크립트 파일 크기 합
- 타사 스크립트 개수 합

하지만 웹 성능에는 변수가 많기 떄문에 실제 웹 성능 측정값에 대한 성능 예산이 필요하다.

### 1.6.2 시간 기반 지표

시간 기반 지표는 브라우저에서 발생하는 다양한 웹 성능 이벤트 값을 측정하여 사용주가 느끼는 웹 성능에 대한 목표치를 설정하는 방식이다.

대표적인 시간 기반 지표는 다음과 같다.

- FCP
- TTI

### 1.6.3 규칙 기반 지표

웹 성능 측정 도구들의 성능점수를 이용한다.

다음과 같은 도구들이 있다.

- WebPageTest
- Lighthouse
- PageSpeed

### 1.6.4 성능 예산 활용

일반적으로 경쟁사 사이트나 비슷한 산업군의 대표적인 웹사이트를 참고하여 설정한다.

최근엔 형상관리 및 새로운 버전을 빌드한 후 배포 이전에 최종 성능 예산을 측정하고 관리하는 방법도 사용한다.(개발서버를 먼저 배포)
